@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap');

:root {
    --tpv-bg: #f9f9f9;
    /* Las variables de ancho ya no son necesarias con el layout de grid */
    --color-primary: #5a2dfc;
    --color-secondary: #007bff;
    --color-warning: #ffc107;
    --color-text-dark: #343a40;
    --color-active-bg: #ece7ff;
    --color-alert: #c62828;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Montserrat', sans-serif;
}

body {
    background-color: var(--tpv-bg);
}

.tpv-container {
    display: flex;
    flex-direction: column;
    height: 100vh; /* Usa 100vh para ocupar toda la altura de la pantalla */
    padding: 20px;
}

/* --- 1. TPV Header y Layout --- */
.tpv-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 15px;
    margin-bottom: 20px;
    border-bottom: 1px solid #eee;
    flex-shrink: 0; /* Evita que el header se encoja */
}

.tpv-header h2 {
    color: var(--color-text-dark);
}

/* === REGLA CORREGIDA Y UNIFICADA === */
.tpv-layout {
    display: grid;
    /* Define las 3 columnas: Menú, Productos (flexible), Resumen de Orden */
    grid-template-columns: 240px 1fr 380px; 
    gap: 20px;
    flex-grow: 1; /* Permite que el layout ocupe el espacio restante */
    overflow: hidden; /* Evita que se creen barras de scroll no deseadas en el body */
}

/* --- 1. Columna de Categorías --- */
.category-sidebar {
    /* El ancho es controlado por .tpv-layout, ya no se necesita 'width' aquí */
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    padding: 15px;
    overflow-y: auto;
}

.category-sidebar h3 {
    margin-bottom: 15px;
    color: var(--color-primary);
}

.category-item {
    display: block;
    padding: 10px 8px;
    margin-bottom: 5px;
    text-decoration: none;
    color: var(--color-text-dark);
    border-radius: 4px;
    transition: background-color 0.2s;
}

.category-item:hover {
    background-color: #f0f0f0;
}

.category-item.active {
    background-color: var(--color-active-bg);
    color: var(--color-primary);
    font-weight: 600;
}

/* --- 2. Columna Central de Productos --- */
.product-grid-area {
    /* El ancho es controlado por .tpv-layout */
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    padding: 15px;
    overflow-y: auto;
}

#productGrid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 10px;
    padding-top: 10px;
}

.product-item-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 15px 5px;
    background-color: #f7f7f7;
    border: 1px solid #ddd;
    border-radius: 6px;
    cursor: pointer;
    text-align: center;
    transition: transform 0.1s;
    height: 80px; /* Tamaño fijo para consistencia */
}

.product-item-btn:hover {
    background-color: #e0e0e0;
    transform: translateY(-2px);
}

.product-name {
    font-weight: 600;
    font-size: 0.95rem;
    color: var(--color-text-dark);
}

.product-price {
    color: var(--color-primary);
    font-size: 0.9rem;
    margin-top: 5px;
}


/* --- 3. Columna de Resumen de Orden --- */
.order-summary-area {
    /* El ancho es controlado por .tpv-layout, ya no se necesita 'width' aquí */
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    padding: 15px;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Evita que el contenido se desborde */
}

#orderItems {
    flex-grow: 1;
    overflow-y: auto;
    padding-bottom: 10px;
    margin-right: -10px; /* Oculta la barra de scroll visualmente */
    padding-right: 10px; /* Recupera el espacio perdido */
}

.order-total {
    display: flex;
    justify-content: space-between;
    font-size: 1.2rem;
    font-weight: 700;
    padding-top: 10px;
    border-top: 2px solid var(--color-primary);
    margin-top: 10px;
    flex-shrink: 0;
}

.order-actions {
    display: flex;
    gap: 10px;
    padding-top: 10px;
    flex-shrink: 0;
}

/* Controles de Cantidad y Tiempo */
.order-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    background-color: #f0f0f0;
    border-top: 1px solid #ddd;
    border-bottom: 1px solid #ddd;
    margin-top: auto; /* Empuja los controles hacia abajo */
    margin-bottom: 10px;
    flex-shrink: 0;
}

.quantity-control {
    display: flex;
    align-items: center;
    gap: 8px;
}

.quantity-control label {
    font-weight: bold;
    font-size: 0.9em;
}

.quantity-control input[type="number"] {
    width: 60px;
    padding: 5px;
    text-align: center;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 1em;
}


/* Estilos para los items dentro de la orden */
.order-time-separator {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    text-align: center;
    font-weight: bold;
    color: #555;
    padding: 12px 10px;
    background-color: #e9ecef;
    margin: 8px 0;
    border-top: 1px dashed #ccc;
    border-bottom: 1px dashed #ccc;
}

.order-item {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: 10px;
    border-bottom: 1px solid #eee;
    cursor: pointer;
    transition: background-color 0.2s;
}

.order-item:hover {
    background-color: #f9f9f9;
}

.order-item .item-details {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    margin-right: 10px; /* Espacio antes del precio */
}

.order-item .item-name {
    font-weight: 500;
}

.order-item .item-comment {
    font-size: 0.85em;
    color: #666;
    margin-top: 4px;
    padding-left: 10px;
    border-left: 2px solid #007bff;
}

.order-item .item-comment .fa-sticky-note {
    margin-right: 5px;
    color: #007bff;
}

.btn-remove {
    background: none;
    border: none;
    color: var(--color-alert);
    font-size: 1.2rem;
    cursor: pointer;
    padding: 0 5px;
}

.btn-remove:hover {
    color: #a71d2a;
}

/* --- Botones Genéricos y Acciones --- */
.btn {
    padding: 10px 15px;
    border-radius: 6px;
    border: none;
    font-weight: 600;
    cursor: pointer;
}

.btn-back {
    background: var(--color-secondary);
    color: white;
    font-size: 0.9rem;
}

.btn-primary {
    background: var(--color-primary);
    color: white;
    flex-grow: 1;
}

.btn-warning {
    background: var(--color-warning);
    color: var(--color-text-dark);
}

/* --- Modales --- */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: none; 
    justify-content: center;
    align-items: center;
    z-index: 9999; 
}

.modal-content {
    background: white;
    padding: 20px;
    border-radius: 10px;
    max-width: 450px;
    width: 90%;
    position: relative;
}

.modal-content .close-btn {
    position: absolute;
    top: 5px;
    right: 10px;
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
}

#commentModal textarea {
    width: 100%;
    margin: 15px 0;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-family: inherit;
    font-size: 1rem;
    resize: vertical;
}

#commentModal .modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    width: 100%;
}

.modifier-options-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin-bottom: 20px;
}

.modifier-option {
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    cursor: pointer;
    transition: border-color 0.2s;
    text-align: center;
}

.modifier-option:has(input:checked) {
    border-color: var(--color-primary);
    background-color: var(--color-active-bg);
    font-weight: 600;
}

.modifier-option input[type="radio"] {
    display: none;
}

/* --- Estilos para el estado de orden bloqueada --- */
.item-locked {
    color: #999; /* Color gris para el candado */
    font-size: 1rem;
    padding: 0 5px;
}

#sendOrderBtn:disabled {
    background-color: #6c757d; /* Color gris oscuro */
    cursor: not-allowed;
}

/* --- NUEVOS ESTILOS PARA EL RELOJ EN LA INTERFAZ DE ORDEN (TPV) --- */

.tpv-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
}

#liveClockContainer {
    /* Estilo de la "píldora" oscura */
    background-color: #2c3e50; 
    color: #ecf0f1;           
    
    /* === CAMBIO CLAVE: Aumentamos el padding horizontal para hacerlo más largo === */
    padding: 8px 360px; /* Antes era 40px, ahora es 80px para un tamaño más considerable */
    
    border-radius: 8px;        
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15); 

    /* Estilo del texto */
    font-family: 'Roboto Mono', monospace;
    font-size: 1.2rem;
    font-weight: 500;
    letter-spacing: 1px;
    
    /* Centrado */
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
}

/* --- ESTILOS PARA EL BUSCADOR GLOBAL --- */

.search-product-area {
    position: relative;
    padding: 10px 0 20px;
}

.search-input-wrapper {
    position: relative;
    width: 100%;
    max-width: 500px; /* Limita el ancho del buscador */
    margin: 0 auto;
}

#productSearchInput {
    width: 100%;
    padding: 12px 12px 12px 40px; /* Padding izquierdo para el ícono */
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 1em;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    transition: border-color 0.2s;
}

#productSearchInput:focus {
    border-color: #7f00ff; /* Resalta al enfocar */
    outline: none;
}

.search-icon {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: #999;
}

/* --- RESULTADOS DROPDOWN --- */

.search-results-dropdown {
    position: absolute;
    top: 100%; /* Aparece justo debajo del input */
    left: 0;
    right: 0;
    max-width: 500px;
    margin: 0 auto;
    background: #fff;
    border: 1px solid #ccc;
    border-top: none;
    border-radius: 0 0 8px 8px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    z-index: 100; /* Asegura que esté sobre otros elementos */
    max-height: 300px;
    overflow-y: auto;
}

.search-result-item {
    display: flex;
    justify-content: space-between;
    padding: 10px 15px;
    cursor: pointer;
    border-bottom: 1px solid #eee;
    transition: background-color 0.15s;
}

.search-result-item:hover {
    background-color: #f0f8ff; /* Fondo claro al pasar el mouse */
}

.result-name {
    font-weight: 600;
}

.result-price {
    color: #7f00ff;
    font-weight: 700;
}

/* Estilo para el ítem bloqueado */
.order-item.locked-item {
    background-color: #f0f0f0; /* Fondo gris claro */
    color: #888; /* Texto más opaco */
    pointer-events: none; /* Deshabilita clics en toda la línea */
    opacity: 0.7; /* Ligeramente transparente */
    border-left: 5px solid #dc3545; /* Barra roja para indicar bloqueo */
}

/* Estilo para el candado */
.order-item .item-locked {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 30px; /* Tamaño del candado */
    height: 30px;
    color: #dc3545; /* Color rojo o de alerta */
    font-size: 1.2em;
}

/* Re-habilitar clics solo para ciertos elementos, si es necesario,
   pero con "pointer-events: none" en el padre, esto podría ser omitido
   a menos que quieras permitir clic en notas aunque no se puedan editar.
   Para bloqueo estricto, el "pointer-events: none" es la mejor opción.
*/